# ******************* DO NOT EDIT THIS NOTICE *****************
# This legal notice is added to every supported source code
# file at every commit. See the README for more info!
# *************************************************************

accounts:
  dev:
    id: '339712993254'
    name: Development Account
    email: jscroft+karma.003.dev@gmail.com
    organizational_unit: dev
  master:
    id: '891377150698'
    name: Master Account
    email: jscroft+karma.003.master@gmail.com
  prod:
    id: '381491905215'
    name: Production Account
    email: jscroft+karma.003.prod@gmail.com
    organizational_unit: prod
  test:
    id: '381491918621'
    name: Testing Account
    email: jscroft+karma.003.test@gmail.com
    organizational_unit: test
  shared_services:
    id: '975050301644'
    name: Shared Services Account
    email: jscroft+karma.003.shared_services@gmail.com
    organizational_unit: infrastructure
batches:
  bootstrap:
    path: src/bootstrap
    generators:
      src/modules/global/outputs.tf: src/templates/terraform-global-outputs.hbs
      src/bootstrap/backend.tf: src/templates/terraform-backend.hbs
      src/bootstrap/backend_override.tf: src/templates/terraform-backend-override.hbs
      src/bootstrap/policies.tf: src/templates/terraform-bootstrap-policies.hbs
      src/bootstrap/providers.tf: src/templates/terraform-providers.hbs
      src/bootstrap/providers_override.tf: src/templates/terraform-providers-override.hbs
      src/bootstrap/terraform.tf: src/templates/terraform.hbs
environments:
  bali:
    account: dev
    cognito_user_pool_name: api-user-v0-bali
    gha_on_push_branches: preview/**
  dev:
    account: dev
    cognito_user_pool_name: api-user-v0-dev
    gha_on_push_branches: dev
  prod:
    account: prod
    cognito_user_pool_name: api-user-v0-prod
    gha_on_push_branches: main
  release:
    account: test
    cognito_user_pool_name: api-user-v0-release
    gha_on_push_branches: release/**
  seattle:
    account: dev
    cognito_user_pool_name: api-user-v0-seattle
    gha_on_push_branches: preview/**
organization:
  aws_region: us-east-1
  github_org: karmaniverous
  master_account: master
  namespace: karma003
organizational_units:
  dev:
    id: ou-u0l7-rgima4c9
    name: Dev Workloads OU
    parent: workloads
  infrastructure:
    id: ou-u0l7-10e2pdh1
    name: Infrastructure OU
  prod:
    id: ou-u0l7-8z1e5t6g
    name: Prod Workloads OU
    parent: workloads
  security:
    id: ou-u0l7-esjkajt6
    name: Security OU
  test:
    id: ou-u0l7-4fmx99nj
    name: Test Workloads OU
    parent: workloads
  workloads:
    id: ou-u0l7-zu0gl8ze
    name: Workloads OU
sso:
  groups:
    terraform_admin:
      name: terraform_admin
      description:
        Terraform administrators can create & manage all resources in all
        accounts.
      account_permission_sets: terraform_admin
    terraform_deployment:
      name: TerraformDeployment
      description:
        Terraform deployment users can create & manage all unprotected
        resources in all accounts.
      account_permission_sets: terraform_deployment
  permission_sets:
    terraform_admin:
      name: TerraformAdmin
      description: Permits creation & management of all resources.
      policies:
        - AdministratorAccess
        - terraform_state_writer
    terraform_deployment:
      name: terraform_deployment
      description: Permits creation & management of all unprotected resources.
      policies:
        - unprotected_resource_writer
        - terraform_state_writer
  # Maps customer-managed policy name to policy document token.
  policies:
    # Permits writing to the Terraform state bucket & state lock table.
    terraform_state_writer: TerraformStateWriter
    # Permits creation & management of unprotected resources.
    unprotected_resource_writer: UnprotectedResourceWriter
terraform:
  aws_version: '>= 5.56.1'
  paths: src
  state:
    account: shared_services
    bucket: '{{#if
      organization.namespace}}{{organization.namespace}}-{{/if}}terraform-state'
    key: terraform.tfstate
    lock_table: terraform-state-lock
  terraform_version: '>= 1.9.0'

